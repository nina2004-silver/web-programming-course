<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTTP –∏ API Fundamentals - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f5f5f5;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 2.5em;
    }

    h2 {
      color: #34495e;
      margin-top: 40px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #3498db;
      font-size: 1.8em;
    }

    h3 {
      color: #555;
      margin-top: 25px;
      margin-bottom: 15px;
      font-size: 1.3em;
    }

    .subtitle {
      color: #7f8c8d;
      margin-bottom: 30px;
      font-size: 1.1em;
    }

    .exercise {
      background: #f8f9fa;
      border-left: 4px solid #3498db;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .exercise-title {
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 1.1em;
    }

    .input-group {
      margin: 15px 0;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #555;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      font-family: monospace;
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: background 0.3s;
      margin-top: 10px;
    }

    button:hover {
      background: #2980b9;
    }

    button:disabled {
      background: #95a5a6;
      cursor: not-allowed;
    }

    .result {
      margin-top: 15px;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .result.success {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }

    .result.error {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }

    .result.info {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      color: #0c5460;
    }

    .result.warning {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      margin: 5px 5px 5px 0;
    }

    .status-2xx { background: #d4edda; color: #155724; }
    .status-4xx { background: #fff3cd; color: #856404; }
    .status-5xx { background: #f8d7da; color: #721c24; }

    .method-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 700;
      font-family: monospace;
      margin: 5px 5px 5px 0;
    }

    .method-get { background: #61affe; color: white; }
    .method-post { background: #49cc90; color: white; }
    .method-put { background: #fca130; color: white; }
    .method-patch { background: #50e3c2; color: #333; }
    .method-delete { background: #f93e3e; color: white; }

    .code-block {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
    }

    .hint {
      background: #fff9e6;
      border-left: 4px solid #ffd700;
      padding: 12px;
      margin: 15px 0;
      font-size: 14px;
    }

    .checkbox-group {
      margin: 10px 0;
    }

    .checkbox-group label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-weight: normal;
      cursor: pointer;
    }

    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin-right: 8px;
    }

    #websocketLog {
      max-height: 200px;
      overflow-y: auto;
      background: #f8f9fa;
      border: 1px solid #ddd;
      padding: 10px;
      margin-top: 10px;
      font-family: monospace;
      font-size: 12px;
    }

    .log-entry {
      padding: 4px 0;
      border-bottom: 1px solid #e9ecef;
    }

    .log-sent { color: #2563eb; }
    .log-received { color: #16a34a; }
    .log-error { color: #dc2626; }
    .log-info { color: #6b7280; }

    .playground {
      background: #fafbfc;
      border: 2px dashed #d0d7de;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .tab-container {
      margin: 20px 0;
    }

    .tabs {
      display: flex;
      gap: 10px;
      border-bottom: 2px solid #e1e4e8;
      margin-bottom: 20px;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      font-weight: 500;
      color: #586069;
      transition: all 0.3s;
    }

    .tab.active {
      color: #3498db;
      border-bottom-color: #3498db;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e1e4e8;
    }

    th {
      background: #f6f8fa;
      font-weight: 600;
      color: #24292e;
    }

    tr:hover {
      background: #f6f8fa;
    }

    .response-viewer {
      margin-top: 15px;
    }

    .response-headers {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
      font-family: monospace;
      font-size: 12px;
    }

    .response-body {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 13px;
      overflow-x: auto;
      max-height: 400px;
      overflow-y: auto;
    }

    .url-builder {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .url-builder select {
      width: auto;
      min-width: 120px;
    }

    .url-builder input {
      flex: 1;
      min-width: 300px;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>HTTP –∏ API Fundamentals</h1>
    <p class="subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏</p>

    <!-- Exercise 1: HTTP Methods -->
    <h2>1. HTTP –ú–µ—Ç–æ–¥—ã –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1.1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –º–µ—Ç–æ–¥–æ–≤</div>
      <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ HTTP –º–µ—Ç–æ–¥—ã —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ API:</p>

      <div class="input-group">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π API:</label>
        <select id="testApi" onchange="updateApiUrl()">
          <option value="reqres">ReqRes.in (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)</option>
          <option value="httpbin">HTTPBin.org (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP)</option>
          <option value="dummyjson">DummyJSON (–ø—Ä–æ–¥—É–∫—Ç—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)</option>
          <option value="github">GitHub API (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)</option>
          <option value="custom">–°–≤–æ–π URL</option>
        </select>
      </div>

      <div class="url-builder">
        <select id="httpMethod">
          <option value="GET">GET</option>
          <option value="POST">POST</option>
          <option value="PUT">PUT</option>
          <option value="PATCH">PATCH</option>
          <option value="DELETE">DELETE</option>
        </select>
        <input type="text" id="httpUrl" value="https://reqres.in/api/users/2" placeholder="URL">
      </div>

      <div class="input-group">
        <label>Request Body (–¥–ª—è POST/PUT/PATCH):</label>
        <textarea id="httpBody" placeholder='{"name": "John Doe", "job": "Developer"}'>{"name": "John Doe", "job": "Developer"}</textarea>
      </div>

      <div class="hint">
        üí° <strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ API:</strong> ReqRes.in, HTTPBin.org, DummyJSON, GitHub API. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π URL.
      </div>

      <button onclick="sendHttpRequest()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>

      <div id="httpResult"></div>
    </div>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏</div>
      <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p>

      <div class="input-group">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤:</label>
        <input type="number" id="repeatCount" value="3" min="1" max="10">
      </div>

      <button onclick="testIdempotency()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</button>

      <div id="idempotencyResult"></div>
    </div>

    <!-- Exercise 2: HTTP Status Codes -->
    <h2>2. HTTP –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2.1: –ò–∑—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤</div>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</p>

      <select id="statusCode" onchange="showStatusInfo()">
        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ --</option>
        <option value="200">200 OK</option>
        <option value="201">201 Created</option>
        <option value="204">204 No Content</option>
        <option value="400">400 Bad Request</option>
        <option value="401">401 Unauthorized</option>
        <option value="403">403 Forbidden</option>
        <option value="404">404 Not Found</option>
        <option value="422">422 Unprocessable Entity</option>
        <option value="429">429 Too Many Requests</option>
        <option value="500">500 Internal Server Error</option>
        <option value="502">502 Bad Gateway</option>
        <option value="503">503 Service Unavailable</option>
      </select>

      <div id="statusInfo"></div>
    </div>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2.2: 401 vs 403 - –í–∏–∫—Ç–æ—Ä–∏–Ω–∞</div>
      <p>–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:</p>

      <div id="authQuiz"></div>
      <button onclick="checkAuthQuiz()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
      <div id="authQuizResult"></div>
    </div>

    <!-- Exercise 3: Query Parameters -->
    <h2>3. Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3.1: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ query string</div>
      <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è URL:</p>

      <div class="input-group">
        <label>Base URL:</label>
        <input type="text" id="baseUrl" value="https://api.github.com/search/repositories">
      </div>

      <div class="input-group">
        <label>Query (q):</label>
        <input type="text" id="queryParam" value="language:typescript">
      </div>

      <div class="input-group">
        <label>Sort:</label>
        <select id="sortParam">
          <option value="">-- –Ω–µ —É–∫–∞–∑–∞–Ω–æ --</option>
          <option value="stars">stars</option>
          <option value="forks">forks</option>
          <option value="updated">updated</option>
        </select>
      </div>

      <div class="input-group">
        <label>Order:</label>
        <select id="orderParam">
          <option value="">-- –Ω–µ —É–∫–∞–∑–∞–Ω–æ --</option>
          <option value="asc">asc</option>
          <option value="desc">desc</option>
        </select>
      </div>

      <div class="input-group">
        <label>Per page:</label>
        <input type="number" id="perPageParam" value="10" min="1" max="100">
      </div>

      <button onclick="buildQueryString()">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å URL</button>
      <div id="queryResult"></div>
      <button id="executeQueryBtn" style="display: none;" onclick="executeQuery()">–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
      <div id="queryExecuteResult"></div>
    </div>

    <!-- Exercise 4: Validation -->
    <h2>4. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 4.1: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è</div>
      <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏):</p>

      <div class="input-group">
        <label>Email:</label>
        <input type="email" id="validationEmail" oninput="validateForm()">
        <span id="emailError" class="result error" style="display: none;"></span>
      </div>

      <div class="input-group">
        <label>–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤):</label>
        <input type="password" id="validationPassword" oninput="validateForm()">
        <span id="passwordError" class="result error" style="display: none;"></span>
      </div>

      <div class="input-group">
        <label>–í–æ–∑—Ä–∞—Å—Ç (18+):</label>
        <input type="number" id="validationAge" oninput="validateForm()">
        <span id="ageError" class="result error" style="display: none;"></span>
      </div>

      <button id="validationSubmit" onclick="submitValidation()" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      <div id="validationResult"></div>
    </div>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 4.2: –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP 422</div>
      <p>–°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:</p>

      <button onclick="simulate422()">–°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å 422 –æ—Ç–≤–µ—Ç</button>
      <div id="validation422Result"></div>
    </div>

    <!-- Exercise 5: JWT -->
    <h2>5. JWT (JSON Web Tokens)</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 5.1: –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JWT</div>
      <p>JWT –º–æ–∂–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–∞! –í—Å—Ç–∞–≤—å—Ç–µ JWT —Ç–æ–∫–µ–Ω –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:</p>

      <div class="input-group">
        <label>JWT Token:</label>
        <textarea id="jwtToken" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEyMywibmFtZSI6IkpvaG4gRG9lIiwicm9sZXMiOlsiYWRtaW4iXSwiaWF0IjoxNzAwMDAwMDAwLCJleHAiOjE3MDAwMDM2MDB9.dGVzdF9zaWduYXR1cmVfaGVyZQ</textarea>
      </div>

      <button onclick="decodeJWT()">–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å JWT</button>
      <div id="jwtResult"></div>

      <div class="hint">
        üí° <strong>–í–∞–∂–Ω–æ:</strong> Payload JWT –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–∞! –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ JWT.
      </div>
    </div>

    <!-- Exercise 6: GitHub OAuth -->
    <h2>6. OAuth 2.0 (GitHub)</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 6.1: Authorization Code Flow</div>
      <p>–ü–æ—à–∞–≥–æ–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è GitHub OAuth flow:</p>

      <div class="tab-container">
        <div class="tabs">
          <button class="tab active" onclick="switchTab('step1')">–®–∞–≥ 1: Redirect</button>
          <button class="tab" onclick="switchTab('step2')">–®–∞–≥ 2: Callback</button>
          <button class="tab" onclick="switchTab('step3')">–®–∞–≥ 3: Exchange</button>
          <button class="tab" onclick="switchTab('step4')">–®–∞–≥ 4: API Call</button>
        </div>

        <div id="step1" class="tab-content active">
          <h3>–®–∞–≥ 1: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ GitHub</h3>
          <p>–°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:</p>

          <div class="input-group">
            <label>Client ID:</label>
            <input type="text" id="oauthClientId" value="your_client_id_here">
          </div>

          <div class="input-group">
            <label>Redirect URI:</label>
            <input type="text" id="oauthRedirectUri" value="http://localhost:3000/callback">
          </div>

          <div class="input-group">
            <label>Scope:</label>
            <input type="text" id="oauthScope" value="user:email">
          </div>

          <button onclick="buildOAuthUrl()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å URL</button>
          <div id="oauthUrlResult"></div>
        </div>

        <div id="step2" class="tab-content">
          <h3>–®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ callback</h3>
          <p>–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GitHub –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ —Å –∫–æ–¥–æ–º:</p>

          <div class="input-group">
            <label>Callback URL (—Å code –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º):</label>
            <input type="text" id="callbackUrl" value="http://localhost:3000/callback?code=abc123def456">
          </div>

          <button onclick="parseCallback()">–ò–∑–≤–ª–µ—á—å code</button>
          <div id="callbackResult"></div>
        </div>

        <div id="step3" class="tab-content">
          <h3>–®–∞–≥ 3: –û–±–º–µ–Ω code –Ω–∞ access_token</h3>
          <p>‚ö†Ô∏è –≠—Ç–æ—Ç —à–∞–≥ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –≤–∞—à–µ–º backend (–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!):</p>

          <div class="code-block">fetch('https://github.com/login/oauth/access_token', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json'
  },
  body: JSON.stringify({
    client_id: process.env.GITHUB_CLIENT_ID,
    client_secret: process.env.GITHUB_CLIENT_SECRET, // ‚ùå –ù–ò–ö–û–ì–î–ê –≤ –±—Ä–∞—É–∑–µ—Ä–µ!
    code: code
  })
})</div>

          <div class="hint">
            üí° <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> Client secret –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä!
          </div>

          <div class="input-group">
            <label>–°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ - Access Token:</label>
            <input type="text" id="accessToken" value="gho_16C7e42F292c6912E7710c838347Ae178B4a">
          </div>

          <button onclick="saveAccessToken()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω</button>
          <div id="tokenResult"></div>
        </div>

        <div id="step4" class="tab-content">
          <h3>–®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ access_token</h3>
          <p>–ó–∞–ø—Ä–æ—Å–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ GitHub API:</p>

          <div class="input-group">
            <label>Access Token:</label>
            <input type="text" id="apiAccessToken" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à GitHub token">
          </div>

          <div class="input-group">
            <label>Endpoint:</label>
            <select id="githubEndpoint">
              <option value="user">GET /user (–ø—Ä–æ—Ñ–∏–ª—å)</option>
              <option value="user/repos">GET /user/repos (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)</option>
              <option value="user/emails">GET /user/emails (email)</option>
            </select>
          </div>

          <button onclick="callGitHubAPI()">–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
          <div id="githubApiResult"></div>

          <div class="hint">
            üí° <strong>–ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –Ω–∞—Å—Ç–æ—è—â–∏–π GitHub Personal Access Token –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
            –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤ Settings ‚Üí Developer settings ‚Üí Personal access tokens.
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise 7: WebSocket -->
    <h2>7. Real-time: WebSocket</h2>

    <div class="exercise">
      <div class="exercise-title">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 7.1: WebSocket Echo Server</div>
      <p>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É WebSocket —Å–µ—Ä–≤–µ—Ä—É:</p>

      <div class="input-group">
        <label>WebSocket URL:</label>
        <input type="text" id="wsUrl" value="wss://echo.websocket.org/">
      </div>

      <button id="wsConnect" onclick="connectWebSocket()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
      <button id="wsDisconnect" onclick="disconnectWebSocket()" style="display: none;">–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è</button>

      <div class="input-group" id="wsMessageGroup" style="display: none;">
        <label>–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
        <input type="text" id="wsMessage" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
        <button onclick="sendWebSocketMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>

      <div id="websocketLog"></div>
    </div>

    <!-- Exercise 8: REST API Design -->
    <h2>8. REST API Design - –®–ø–∞—Ä–≥–∞–ª–∫–∞</h2>

    <div class="exercise">
      <div class="exercise-title">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ vs –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints</div>
      <p>–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è REST API endpoints:</p>

      <table>
        <thead>
          <tr>
            <th style="width: 40%;">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</th>
            <th style="width: 40%;">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</th>
            <th style="width: 20%;">–ü–æ—á–µ–º—É</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>GET /api/getUsers</code></td>
            <td><code>GET /api/users</code></td>
            <td>–ì–ª–∞–≥–æ–ª –≤ URL</td>
          </tr>
          <tr>
            <td><code>POST /api/createUser</code></td>
            <td><code>POST /api/users</code></td>
            <td>–ì–ª–∞–≥–æ–ª –≤ URL</td>
          </tr>
          <tr>
            <td><code>GET /api/user/123</code></td>
            <td><code>GET /api/users/123</code></td>
            <td>–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ</td>
          </tr>
          <tr>
            <td><code>GET /api/userProfiles</code></td>
            <td><code>GET /api/user-profiles</code></td>
            <td>camelCase –≤–º–µ—Å—Ç–æ kebab-case</td>
          </tr>
          <tr>
            <td><code>GET /api/user_profiles</code></td>
            <td><code>GET /api/user-profiles</code></td>
            <td>snake_case –≤–º–µ—Å—Ç–æ kebab-case</td>
          </tr>
          <tr>
            <td><code>PUT /api/users/123</code> (—á–∞—Å—Ç–∏—á–Ω–æ–µ)</td>
            <td><code>PATCH /api/users/123</code></td>
            <td>PUT = –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞, PATCH = —á–∞—Å—Ç–∏—á–Ω–æ–µ</td>
          </tr>
          <tr>
            <td><code>GET /api/deleteUser/123</code></td>
            <td><code>DELETE /api/users/123</code></td>
            <td>–ì–ª–∞–≥–æ–ª –≤ URL + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥</td>
          </tr>
          <tr>
            <td><code>POST /api/users/search</code></td>
            <td><code>GET /api/users?q=search</code></td>
            <td>–ü–æ–∏—Å–∫ = GET —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</td>
          </tr>
        </tbody>
      </table>

      <h3 style="margin-top: 30px;">CRUD ‚Üí HTTP –º–µ—Ç–æ–¥—ã</h3>
      <table>
        <thead>
          <tr>
            <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
            <th>HTTP –º–µ—Ç–æ–¥</th>
            <th>Endpoint</th>
            <th>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</th>
            <th>–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Create</strong></td>
            <td><span class="method-badge method-post">POST</span></td>
            <td><code>/api/users</code></td>
            <td>–î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</td>
            <td><span class="status-badge status-2xx">201 Created</span> + –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç</td>
          </tr>
          <tr>
            <td><strong>Read (—Å–ø–∏—Å–æ–∫)</strong></td>
            <td><span class="method-badge method-get">GET</span></td>
            <td><code>/api/users</code></td>
            <td>‚Äî</td>
            <td><span class="status-badge status-2xx">200 OK</span> + –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤</td>
          </tr>
          <tr>
            <td><strong>Read (–æ–¥–∏–Ω)</strong></td>
            <td><span class="method-badge method-get">GET</span></td>
            <td><code>/api/users/123</code></td>
            <td>‚Äî</td>
            <td><span class="status-badge status-2xx">200 OK</span> + –æ–±—ä–µ–∫—Ç</td>
          </tr>
          <tr>
            <td><strong>Update (–ø–æ–ª–Ω–æ–µ)</strong></td>
            <td><span class="method-badge method-put">PUT</span></td>
            <td><code>/api/users/123</code></td>
            <td>–í—Å–µ –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</td>
            <td><span class="status-badge status-2xx">200 OK</span> + –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç</td>
          </tr>
          <tr>
            <td><strong>Update (—á–∞—Å—Ç–∏—á–Ω–æ–µ)</strong></td>
            <td><span class="method-badge method-patch">PATCH</span></td>
            <td><code>/api/users/123</code></td>
            <td>–¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è</td>
            <td><span class="status-badge status-2xx">200 OK</span> + –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç</td>
          </tr>
          <tr>
            <td><strong>Delete</strong></td>
            <td><span class="method-badge method-delete">DELETE</span></td>
            <td><code>/api/users/123</code></td>
            <td>‚Äî</td>
            <td><span class="status-badge status-2xx">204 No Content</span></td>
          </tr>
        </tbody>
      </table>

      <h3 style="margin-top: 30px;">–ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è</h3>
      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 15px;">
        <div style="margin-bottom: 15px;">
          <strong>‚úÖ DO:</strong>
          <ul style="margin: 10px 0 0 20px;">
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: <code>/users</code>, <code>/posts</code></li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ kebab-case –¥–ª—è —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Å–ª–æ–≤: <code>/user-profiles</code></li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, –Ω–µ –≥–ª–∞–≥–æ–ª—ã: <code>/users</code>, –Ω–µ <code>/getUsers</code></li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è ID: <code>/users/123</code></li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: <code>/users?role=admin</code></li>
            <li>–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã: <code>/users/123/posts</code></li>
          </ul>
        </div>
        <div>
          <strong>‚ùå DON'T:</strong>
          <ul style="margin: 10px 0 0 20px;">
            <li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–∞–≥–æ–ª—ã –≤ URL: <code>/createUser</code>, <code>/deletePost</code></li>
            <li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π: <code>/user</code></li>
            <li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ camelCase: <code>/userProfiles</code></li>
            <li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ snake_case: <code>/user_profiles</code></li>
            <li>–ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ URL: <code>POST /users/create</code></li>
          </ul>
        </div>
      </div>

      <h3 style="margin-top: 30px;">–ü—Ä–∏–º–µ—Ä—ã endpoints –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
      <div class="code-block">// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
GET    /api/users                 // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/users?role=admin      // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏
GET    /api/users?page=2&limit=10 // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
GET    /api/users/123             // –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POST   /api/users                 // –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PATCH  /api/users/123             // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á–∞—Å—Ç–∏—á–Ω–æ)
PUT    /api/users/123             // –ó–∞–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–ª–Ω–æ—Å—Ç—å—é)
DELETE /api/users/123             // –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

// –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
GET    /api/users/123/posts       // –í—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/users/123/posts/456   // –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/users/123/posts       // –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–µ—Å–ª–∏ –Ω–µ–ª—å–∑—è –≤—ã—Ä–∞–∑–∏—Ç—å —á–µ—Ä–µ–∑ CRUD)
POST   /api/users/123/activate    // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
POST   /api/posts/456/publish     // –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç
POST   /api/orders/789/cancel     // –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑</div>

      <h3 style="margin-top: 30px;">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä endpoints</h3>
      <div style="background: #fafbfc; border: 2px dashed #d0d7de; padding: 20px; border-radius: 8px;">
        <div class="input-group">
          <label>–†–µ—Å—É—Ä—Å (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ):</label>
          <input type="text" id="resourceName" placeholder="users" oninput="generateEndpoints()">
        </div>

        <div class="input-group">
          <label>ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
          <input type="text" id="resourceId" placeholder="123" oninput="generateEndpoints()">
        </div>

        <div class="input-group">
          <label>–í–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
          <input type="text" id="nestedResource" placeholder="posts" oninput="generateEndpoints()">
        </div>

        <div id="generatedEndpoints"></div>
      </div>
    </div>

  </div>

  <script>
    // API presets
    const apiPresets = {
      reqres: {
        GET: 'https://reqres.in/api/users/2',
        POST: 'https://reqres.in/api/users',
        PUT: 'https://reqres.in/api/users/2',
        PATCH: 'https://reqres.in/api/users/2',
        DELETE: 'https://reqres.in/api/users/2',
        body: '{"name": "John Doe", "job": "Developer"}'
      },
      httpbin: {
        GET: 'https://httpbin.org/get',
        POST: 'https://httpbin.org/post',
        PUT: 'https://httpbin.org/put',
        PATCH: 'https://httpbin.org/patch',
        DELETE: 'https://httpbin.org/delete',
        body: '{"test": "data", "value": 123}'
      },
      dummyjson: {
        GET: 'https://dummyjson.com/products/1',
        POST: 'https://dummyjson.com/products/add',
        PUT: 'https://dummyjson.com/products/1',
        PATCH: 'https://dummyjson.com/products/1',
        DELETE: 'https://dummyjson.com/products/1',
        body: '{"title": "New Product", "price": 999}'
      },
      github: {
        GET: 'https://api.github.com/users/github',
        POST: 'https://api.github.com/gists',
        PUT: 'https://api.github.com/user',
        PATCH: 'https://api.github.com/user',
        DELETE: 'https://api.github.com/user',
        body: '{"description": "Test gist", "public": true, "files": {"test.txt": {"content": "Hello"}}}'
      }
    };

    function updateApiUrl() {
      const api = document.getElementById('testApi').value;
      const method = document.getElementById('httpMethod').value;
      const urlInput = document.getElementById('httpUrl');
      const bodyInput = document.getElementById('httpBody');

      if (api === 'custom') {
        urlInput.value = '';
        urlInput.readOnly = false;
        bodyInput.value = '';
      } else {
        const preset = apiPresets[api];
        urlInput.value = preset[method] || preset.GET;
        urlInput.readOnly = false;
        bodyInput.value = preset.body;
      }
    }

    // Exercise 1.1: HTTP Methods
    async function sendHttpRequest() {
      const method = document.getElementById('httpMethod').value;
      const url = document.getElementById('httpUrl').value;
      const body = document.getElementById('httpBody').value;
      const resultDiv = document.getElementById('httpResult');

      resultDiv.innerHTML = '<div class="loading"></div> –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å...';

      try {
        const options = { method };

        if (['POST', 'PUT', 'PATCH'].includes(method) && body) {
          options.headers = { 'Content-Type': 'application/json' };
          options.body = body;
        }

        const response = await fetch(url, options);
        const data = await response.json();

        const statusClass = response.status >= 200 && response.status < 300 ? 'success' :
                           response.status >= 400 && response.status < 500 ? 'warning' : 'error';

        resultDiv.innerHTML = `
          <div class="result ${statusClass}">
            <strong>Status:</strong> ${response.status} ${response.statusText}
            <br><strong>Method:</strong> ${method}
            <br><br><strong>Response:</strong>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          </div>
        `;
      } catch (error) {
        resultDiv.innerHTML = `<div class="result error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
      }
    }

    // Exercise 1.2: Idempotency
    async function testIdempotency() {
      const method = document.getElementById('httpMethod').value;
      const url = document.getElementById('httpUrl').value;
      const count = parseInt(document.getElementById('repeatCount').value);
      const resultDiv = document.getElementById('idempotencyResult');

      resultDiv.innerHTML = '<div class="loading"></div> –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞...';

      const results = [];

      for (let i = 0; i < count; i++) {
        try {
          const response = await fetch(url, { method });
          const data = await response.json();
          results.push({
            attempt: i + 1,
            status: response.status,
            data: JSON.stringify(data)
          });
        } catch (error) {
          results.push({
            attempt: i + 1,
            error: error.message
          });
        }
      }

      const allSame = results.every(r => r.status === results[0].status);
      const isIdempotent = ['GET', 'PUT', 'DELETE'].includes(method);

      let html = `<div class="result info">
        <strong>–ú–µ—Ç–æ–¥ ${method} ${isIdempotent ? '‚úÖ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω' : '‚ùå –ù–ï –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω'}</strong>
        <br><br>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã ${count} –∑–∞–ø—Ä–æ—Å–æ–≤:
      `;

      results.forEach(r => {
        html += `<br>–ü–æ–ø—ã—Ç–∫–∞ ${r.attempt}: —Å—Ç–∞—Ç—É—Å ${r.status || '–æ—à–∏–±–∫–∞'}`;
      });

      if (!isIdempotent && method === 'POST') {
        html += `<br><br>‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> POST –Ω–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤!`;
      }

      html += '</div>';
      resultDiv.innerHTML = html;
    }

    // Exercise 2.1: Status Codes
    const statusInfo = {
      '200': {
        title: '200 OK',
        description: '–ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ',
        class: 'status-2xx',
        example: 'GET /api/users ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
        code: `const response = await fetch('/api/users');
if (response.status === 200) {
  const users = await response.json();
  console.log(users);
}`
      },
      '201': {
        title: '201 Created',
        description: '–†–µ—Å—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω',
        class: 'status-2xx',
        example: 'POST /api/users ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω',
        code: `const response = await fetch('/api/users', {
  method: 'POST',
  body: JSON.stringify(userData)
});
if (response.status === 201) {
  const newUser = await response.json();
  console.log('Created:', newUser);
}`
      },
      '204': {
        title: '204 No Content',
        description: '–£—Å–ø–µ—à–Ω–æ, –Ω–æ –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞',
        class: 'status-2xx',
        example: 'DELETE /api/users/123 ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω',
        code: `const response = await fetch('/api/users/123', {
  method: 'DELETE'
});
if (response.status === 204) {
  console.log('Deleted successfully');
}`
      },
      '400': {
        title: '400 Bad Request',
        description: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–∞',
        class: 'status-4xx',
        example: '–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON –≤ body',
        code: `if (response.status === 400) {
  const error = await response.json();
  console.error('Bad request:', error);
}`
      },
      '401': {
        title: '401 Unauthorized',
        description: '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è - "–ö—Ç–æ —Ç—ã?"',
        class: 'status-4xx',
        example: '–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫ ‚Üí redirect –Ω–∞ login',
        code: `if (response.status === 401) {
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω
  window.location.href = '/login';
}`
      },
      '403': {
        title: '403 Forbidden',
        description: '–ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ - "–ó–Ω–∞—é –∫—Ç–æ —Ç—ã, –Ω–æ –Ω–µ–ª—å–∑—è"',
        class: 'status-4xx',
        example: 'User –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å Admin –¥–∞–Ω–Ω—ã–µ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É',
        code: `if (response.status === 403) {
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω, –Ω–æ –Ω–µ—Ç –ø—Ä–∞–≤
  showError('Access denied');
}`
      },
      '404': {
        title: '404 Not Found',
        description: '–†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω',
        class: 'status-4xx',
        example: 'GET /api/users/999999 ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç',
        code: `if (response.status === 404) {
  showError('User not found');
}`
      },
      '422': {
        title: '422 Unprocessable Entity',
        description: '–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö',
        class: 'status-4xx',
        example: 'Email –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π, –≤–æ–∑—Ä–∞—Å—Ç < 18',
        code: `if (response.status === 422) {
  const error = await response.json();
  error.errors.forEach(err => {
    showFieldError(err.field, err.message);
  });
}`
      },
      '429': {
        title: '429 Too Many Requests',
        description: 'Rate limiting - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤',
        class: 'status-4xx',
        example: '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç API (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å)',
        code: `if (response.status === 429) {
  const retryAfter = response.headers.get('Retry-After');
  console.log(\`Retry after \${retryAfter} seconds\`);
}`
      },
      '500': {
        title: '500 Internal Server Error',
        description: '–û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ',
        class: 'status-5xx',
        example: '–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–µ—Ä–∞',
        code: `if (response.status === 500) {
  console.error('Server error');
  showError('Something went wrong');
}`
      },
      '502': {
        title: '502 Bad Gateway',
        description: '–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∫—Å–∏/gateway',
        class: 'status-5xx',
        example: 'Nginx –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ backend',
        code: `if (response.status === 502) {
  showError('Service temporarily unavailable');
}`
      },
      '503': {
        title: '503 Service Unavailable',
        description: '–°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞)',
        class: 'status-5xx',
        example: '–°–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
        code: `if (response.status === 503) {
  showError('Service under maintenance');
}`
      }
    };

    function showStatusInfo() {
      const code = document.getElementById('statusCode').value;
      const infoDiv = document.getElementById('statusInfo');

      if (!code) {
        infoDiv.innerHTML = '';
        return;
      }

      const info = statusInfo[code];
      infoDiv.innerHTML = `
        <div class="result info">
          <span class="status-badge ${info.class}">${info.title}</span>
          <br><br>
          <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${info.description}
          <br><br>
          <strong>–ü—Ä–∏–º–µ—Ä:</strong> ${info.example}
          <br><br>
          <strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∫–æ–¥–µ:</strong>
          <div class="code-block">${info.code}</div>
        </div>
      `;
    }

    // Exercise 2.2: Auth Quiz
    const authQuestions = [
      {
        question: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª —Ç–æ–∫–µ–Ω –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É endpoint',
        correct: '401'
      },
      {
        question: '–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —á—É–∂–æ–π –∞–∫–∫–∞—É–Ω—Ç',
        correct: '403'
      },
      {
        question: 'Access token –∏—Å—Ç–µ–∫',
        correct: '401'
      },
      {
        question: 'User –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ /admin –ø–∞–Ω–µ–ª–∏',
        correct: '403'
      },
      {
        question: '–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization',
        correct: '401'
      }
    ];

    function initAuthQuiz() {
      const quizDiv = document.getElementById('authQuiz');
      let html = '';

      authQuestions.forEach((q, i) => {
        html += `
          <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 4px;">
            <p><strong>${i + 1}.</strong> ${q.question}</p>
            <label style="margin-right: 20px;">
              <input type="radio" name="q${i}" value="401"> 401 Unauthorized
            </label>
            <label>
              <input type="radio" name="q${i}" value="403"> 403 Forbidden
            </label>
          </div>
        `;
      });

      quizDiv.innerHTML = html;
    }

    function checkAuthQuiz() {
      let correct = 0;
      const resultDiv = document.getElementById('authQuizResult');
      let html = '<div class="result info"><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</strong><br><br>';

      authQuestions.forEach((q, i) => {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected && selected.value === q.correct) {
          correct++;
          html += `${i + 1}. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (${q.correct})<br>`;
        } else {
          html += `${i + 1}. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${q.correct}<br>`;
        }
      });

      html += `<br><strong>–ò—Ç–æ–≥–æ: ${correct} –∏–∑ ${authQuestions.length}</strong>`;

      if (correct === authQuestions.length) {
        html += '<br><br>üéâ –û—Ç–ª–∏—á–Ω–æ! –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É 401 –∏ 403!';
      } else {
        html += '<br><br>üí° –ü–æ–º–Ω–∏—Ç–µ: 401 = "–ö—Ç–æ —Ç—ã?" (–Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω), 403 = "–ó–Ω–∞—é –∫—Ç–æ —Ç—ã, –Ω–æ –Ω–µ–ª—å–∑—è" (–Ω–µ—Ç –ø—Ä–∞–≤)';
      }

      html += '</div>';
      resultDiv.innerHTML = html;
    }

    // Exercise 3: Query Parameters
    function buildQueryString() {
      const baseUrl = document.getElementById('baseUrl').value;
      const query = document.getElementById('queryParam').value;
      const sort = document.getElementById('sortParam').value;
      const order = document.getElementById('orderParam').value;
      const perPage = document.getElementById('perPageParam').value;

      const params = new URLSearchParams();
      if (query) params.set('q', query);
      if (sort) params.set('sort', sort);
      if (order) params.set('order', order);
      if (perPage) params.set('per_page', perPage);

      const fullUrl = `${baseUrl}?${params.toString()}`;

      document.getElementById('queryResult').innerHTML = `
        <div class="result success">
          <strong>–ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π URL:</strong><br>
          <code>${fullUrl}</code>
          <br><br>
          <strong>Query String:</strong><br>
          <code>${params.toString()}</code>
        </div>
      `;

      document.getElementById('executeQueryBtn').style.display = 'inline-block';
      window.currentQueryUrl = fullUrl;
    }

    async function executeQuery() {
      const resultDiv = document.getElementById('queryExecuteResult');
      resultDiv.innerHTML = '<div class="loading"></div> –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ GitHub API...';

      try {
        const response = await fetch(window.currentQueryUrl);
        const data = await response.json();

        let html = `<div class="result success">
          <strong>Status:</strong> ${response.status}<br>
          <strong>Total Count:</strong> ${data.total_count || 0}<br><br>
        `;

        if (data.items && data.items.length > 0) {
          html += '<strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</strong><br>';
          data.items.slice(0, 5).forEach(item => {
            html += `‚Ä¢ ${item.name || item.full_name} (‚≠ê ${item.stargazers_count || 0})<br>`;
          });
        }

        html += '</div>';
        resultDiv.innerHTML = html;
      } catch (error) {
        resultDiv.innerHTML = `<div class="result error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
      }
    }

    // Exercise 4: Validation
    function validateForm() {
      const email = document.getElementById('validationEmail').value;
      const password = document.getElementById('validationPassword').value;
      const age = document.getElementById('validationAge').value;

      let valid = true;

      // Email validation
      const emailError = document.getElementById('emailError');
      if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        emailError.textContent = '–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π email';
        emailError.style.display = 'block';
        valid = false;
      } else {
        emailError.style.display = 'none';
      }

      // Password validation
      const passwordError = document.getElementById('passwordError');
      if (password && password.length < 8) {
        passwordError.textContent = '–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤';
        passwordError.style.display = 'block';
        valid = false;
      } else {
        passwordError.style.display = 'none';
      }

      // Age validation
      const ageError = document.getElementById('ageError');
      if (age && parseInt(age) < 18) {
        ageError.textContent = '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç: 18';
        ageError.style.display = 'block';
        valid = false;
      } else {
        ageError.style.display = 'none';
      }

      document.getElementById('validationSubmit').disabled = !valid || !email || !password || !age;
    }

    function submitValidation() {
      const resultDiv = document.getElementById('validationResult');
      resultDiv.innerHTML = `
        <div class="result success">
          ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞!<br><br>
          üí° <strong>–í–∞–∂–Ω–æ:</strong> –ù–æ —ç—Ç–æ –ù–ï –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ! –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
        </div>
      `;
    }

    function simulate422() {
      const mockResponse = {
        type: 'validation-error',
        title: 'Validation Failed',
        status: 422,
        errors: [
          {
            field: 'email',
            message: 'Email already taken'
          },
          {
            field: 'age',
            message: 'Must be at least 18'
          }
        ]
      };

      document.getElementById('validation422Result').innerHTML = `
        <div class="result error">
          <strong>HTTP 422 Unprocessable Entity</strong><br><br>
          <strong>Response:</strong>
          <pre>${JSON.stringify(mockResponse, null, 2)}</pre>
          <br>
          <strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∫–æ–¥–µ:</strong>
          <div class="code-block">if (response.status === 422) {
  const error = await response.json();
  error.errors.forEach(err => {
    showFieldError(err.field, err.message);
  });
}</div>
        </div>
      `;
    }

    // Exercise 5: JWT
    function decodeJWT() {
      const token = document.getElementById('jwtToken').value.trim();
      const resultDiv = document.getElementById('jwtResult');

      if (!token) {
        resultDiv.innerHTML = '<div class="result error">–í—Å—Ç–∞–≤—å—Ç–µ JWT —Ç–æ–∫–µ–Ω</div>';
        return;
      }

      try {
        const parts = token.split('.');
        if (parts.length !== 3) {
          throw new Error('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JWT —Ñ–æ—Ä–º–∞—Ç');
        }

        const header = JSON.parse(atob(parts[0]));
        const payload = JSON.parse(atob(parts[1]));

        let html = `<div class="result success">
          <strong>‚úÖ JWT —É—Å–ø–µ—à–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω!</strong><br><br>
          <strong>Header:</strong>
          <pre>${JSON.stringify(header, null, 2)}</pre>
          <br>
          <strong>Payload:</strong>
          <pre>${JSON.stringify(payload, null, 2)}</pre>
          <br>
          <strong>Signature:</strong> ${parts[2].substring(0, 20)}...
        `;

        if (payload.exp) {
          const expDate = new Date(payload.exp * 1000);
          const isExpired = expDate < new Date();
          html += `<br><br><strong>Expires:</strong> ${expDate.toLocaleString()} ${isExpired ? '‚ùå (expired)' : '‚úÖ (valid)'}`;
        }

        html += `</div>
          <div class="hint">
            ‚ö†Ô∏è <strong>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:</strong> –ú—ã —Å–º–æ–≥–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å payload –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–∞!
            –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ JWT –ù–ï —à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö.
            –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ JWT!
          </div>
        `;

        resultDiv.innerHTML = html;
      } catch (error) {
        resultDiv.innerHTML = `<div class="result error">–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}</div>`;
      }
    }

    // Exercise 6: OAuth
    function buildOAuthUrl() {
      const clientId = document.getElementById('oauthClientId').value;
      const redirectUri = document.getElementById('oauthRedirectUri').value;
      const scope = document.getElementById('oauthScope').value;

      const params = new URLSearchParams({
        client_id: clientId,
        redirect_uri: redirectUri,
        scope: scope
      });

      const url = `https://github.com/login/oauth/authorize?${params.toString()}`;

      document.getElementById('oauthUrlResult').innerHTML = `
        <div class="result success">
          <strong>Authorization URL:</strong><br>
          <code>${url}</code>
          <br><br>
          <strong>TypeScript –∫–æ–¥:</strong>
          <div class="code-block">function loginWithGitHub() {
  const params = new URLSearchParams({
    client_id: '${clientId}',
    redirect_uri: '${redirectUri}',
    scope: '${scope}'
  });

  window.location.href =
    \`https://github.com/login/oauth/authorize?\${params}\`;
}</div>
        </div>
      `;
    }

    function parseCallback() {
      const callbackUrl = document.getElementById('callbackUrl').value;
      const url = new URL(callbackUrl);
      const code = url.searchParams.get('code');
      const error = url.searchParams.get('error');

      if (error) {
        document.getElementById('callbackResult').innerHTML = `
          <div class="result error">
            ‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ${error}
          </div>
        `;
        return;
      }

      if (!code) {
        document.getElementById('callbackResult').innerHTML = `
          <div class="result error">
            Code –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ URL
          </div>
        `;
        return;
      }

      document.getElementById('callbackResult').innerHTML = `
        <div class="result success">
          ‚úÖ Code —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω: <code>${code}</code>
          <br><br>
          <strong>TypeScript –∫–æ–¥:</strong>
          <div class="code-block">const code = new URLSearchParams(window.location.search).get('code');
if (code) {
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å code –Ω–∞ –≤–∞—à backend –¥–ª—è –æ–±–º–µ–Ω–∞ –Ω–∞ access_token
  const response = await fetch('/api/auth/github', {
    method: 'POST',
    body: JSON.stringify({ code })
  });

  const { token } = await response.json();
  localStorage.setItem('token', token);
}</div>
        </div>
      `;
    }

    function saveAccessToken() {
      const token = document.getElementById('accessToken').value;

      document.getElementById('tokenResult').innerHTML = `
        <div class="result success">
          ‚úÖ Access token –ø–æ–ª—É—á–µ–Ω!<br><br>
          –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GitHub API.
          –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–®–∞–≥ 4" –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.
        </div>
      `;
    }

    async function callGitHubAPI() {
      const token = document.getElementById('apiAccessToken').value;
      const endpoint = document.getElementById('githubEndpoint').value;
      const resultDiv = document.getElementById('githubApiResult');

      if (!token) {
        resultDiv.innerHTML = '<div class="result error">–í—Å—Ç–∞–≤—å—Ç–µ access token</div>';
        return;
      }

      resultDiv.innerHTML = '<div class="loading"></div> –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å...';

      try {
        const response = await fetch(`https://api.github.com/${endpoint}`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Accept': 'application/vnd.github.v3+json'
          }
        });

        if (response.status === 401) {
          resultDiv.innerHTML = `
            <div class="result error">
              ‚ùå 401 Unauthorized<br>
              –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω.
            </div>
          `;
          return;
        }

        if (response.status === 403) {
          resultDiv.innerHTML = `
            <div class="result error">
              ‚ùå 403 Forbidden<br>
              –£ —Ç–æ–∫–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ (scopes) –¥–ª—è —ç—Ç–æ–≥–æ endpoint.
            </div>
          `;
          return;
        }

        const data = await response.json();

        resultDiv.innerHTML = `
          <div class="result success">
            <strong>‚úÖ Status:</strong> ${response.status}<br><br>
            <strong>Response:</strong>
            <pre>${JSON.stringify(data, null, 2).substring(0, 1000)}${JSON.stringify(data).length > 1000 ? '...' : ''}</pre>
          </div>
        `;
      } catch (error) {
        resultDiv.innerHTML = `<div class="result error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
      }
    }

    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });

      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    // Exercise 7: WebSocket
    let ws = null;

    function connectWebSocket() {
      const url = document.getElementById('wsUrl').value;
      const logDiv = document.getElementById('websocketLog');

      try {
        ws = new WebSocket(url);

        ws.onopen = () => {
          addLog('info', `‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ ${url}`);
          document.getElementById('wsConnect').style.display = 'none';
          document.getElementById('wsDisconnect').style.display = 'inline-block';
          document.getElementById('wsMessageGroup').style.display = 'block';
        };

        ws.onmessage = (event) => {
          addLog('received', `üì• –ü–æ–ª—É—á–µ–Ω–æ: ${event.data}`);
        };

        ws.onerror = (error) => {
          addLog('error', `‚ùå –û—à–∏–±–∫–∞: ${error.message || 'Connection failed'}`);
        };

        ws.onclose = () => {
          addLog('info', 'üîå –û—Ç–∫–ª—é—á–µ–Ω–æ');
          document.getElementById('wsConnect').style.display = 'inline-block';
          document.getElementById('wsDisconnect').style.display = 'none';
          document.getElementById('wsMessageGroup').style.display = 'none';
        };
      } catch (error) {
        addLog('error', `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${error.message}`);
      }
    }

    function disconnectWebSocket() {
      if (ws) {
        ws.close();
      }
    }

    function sendWebSocketMessage() {
      const message = document.getElementById('wsMessage').value;
      if (ws && ws.readyState === WebSocket.OPEN && message) {
        ws.send(message);
        addLog('sent', `üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${message}`);
        document.getElementById('wsMessage').value = '';
      }
    }

    function addLog(type, message) {
      const logDiv = document.getElementById('websocketLog');
      const entry = document.createElement('div');
      entry.className = `log-entry log-${type}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logDiv.appendChild(entry);
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    // Exercise 8: REST Endpoint Generator
    function generateEndpoints() {
      const resource = document.getElementById('resourceName').value.trim();
      const id = document.getElementById('resourceId').value.trim();
      const nested = document.getElementById('nestedResource').value.trim();
      const resultDiv = document.getElementById('generatedEndpoints');

      if (!resource) {
        resultDiv.innerHTML = '';
        return;
      }

      let html = '<div class="result success" style="margin-top: 15px;"><strong>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ endpoints:</strong><br><br>';

      // Basic CRUD
      html += `<span class="method-badge method-get">GET</span> <code>/api/${resource}</code> - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö ${resource}<br>`;
      html += `<span class="method-badge method-post">POST</span> <code>/api/${resource}</code> - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π ${resource.slice(0, -1)}<br>`;

      if (id) {
        html += `<br><span class="method-badge method-get">GET</span> <code>/api/${resource}/${id}</code> - –ü–æ–ª—É—á–∏—Ç—å ${resource.slice(0, -1)} #${id}<br>`;
        html += `<span class="method-badge method-patch">PATCH</span> <code>/api/${resource}/${id}</code> - –û–±–Ω–æ–≤–∏—Ç—å ${resource.slice(0, -1)} #${id}<br>`;
        html += `<span class="method-badge method-put">PUT</span> <code>/api/${resource}/${id}</code> - –ó–∞–º–µ–Ω–∏—Ç—å ${resource.slice(0, -1)} #${id}<br>`;
        html += `<span class="method-badge method-delete">DELETE</span> <code>/api/${resource}/${id}</code> - –£–¥–∞–ª–∏—Ç—å ${resource.slice(0, -1)} #${id}<br>`;

        if (nested) {
          html += `<br><span class="method-badge method-get">GET</span> <code>/api/${resource}/${id}/${nested}</code> - –í—Å–µ ${nested} –¥–ª—è ${resource.slice(0, -1)} #${id}<br>`;
          html += `<span class="method-badge method-post">POST</span> <code>/api/${resource}/${id}/${nested}</code> - –°–æ–∑–¥–∞—Ç—å ${nested.slice(0, -1)} –¥–ª—è ${resource.slice(0, -1)} #${id}<br>`;
        }
      }

      html += '</div>';
      resultDiv.innerHTML = html;
    }

    // Initialize quizzes on page load
    document.addEventListener('DOMContentLoaded', () => {
      initAuthQuiz();
    });
  </script>
</body>
</html>
